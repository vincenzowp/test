<!DOCTYPE HTML>
<html>
    <head>
    <title>Daisy - A Charming jQuery Mobile Template</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

		<!-- jQueryMobileCSS - styling-->
		<link rel="stylesheet" href="css/jqeury.mobile.theme.min.css" />
				
		<!-- jQueryMobile icons -->
		<link rel="stylesheet" href="css/jquery.mobile.icons.min.css" />
		
		<!-- jQueryMobile core CSS -->
		<link rel="stylesheet" href="css/jquery.mobile.min.css" />
		
		<!-- Load fonts -->
		<link rel="stylesheet" href="css/fonts.css" />
				
		<!-- DAISY styles -->
		<link rel="stylesheet" href="css/style.css" />
		
		<!-- Luke's styles -->
		<link rel="stylesheet" href="css/luke.css" />
				
		<!-- Load Google Fonts 
		<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,900,300italic,400italic,600italic,700italic|Oswald:400,700|Roboto:400,300,300italic,400italic,900,700,500' rel='stylesheet' type='text/css'> -->
	
		<!-- Load Font Awesome Icons -->
		<link rel="stylesheet" href="css/font-awesome.min.css">
		
		<!-- jQuery -->
		<script src="js/jquery.min.js"></script>
		
		<!-- jQueryMobile -->
		<script src="js/jquery.mobile.min.js"></script>
		
		<!-- DAISY JS -->
		<script src="js/scripts.js"></script>
		
		<!-- Google maps API -->
		<script src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>

    </head>
    <body>
    
   		 <div data-role="page">
        
            <div data-role="panel" data-display="push" id="sidebar" data-theme="c">
            
                	<form id="sidebar-searchform">
                	    <input data-role="none" class="luke-input" type="text" |name="s" placeholder="Enter your text" />
                	    <input data-role="none" class="luke-button" type="submit" name="submit" value="" />
                	</form>
            		
            		<h4>Daisy styles (6)</h4>
            		
            		<ul data-role="listview">
            		    <li data-icon='false'><i class="fa fa-list"></i><a data-fajax="false" href="index-alternative.html">Alternativa</a></li>
            		    <li data-icon='false'><i class="fa fa-briefcase"></i><a data-ajax="false" href="index-business.html">Byznis</a></li>
            		    <li data-icon='false'><i class="fa fa-home"></i><a data-ajax="false" href="index.html">Klasicka</a></li>
            		    <li data-icon='false'><i class="fa fa-shopping-cart"></i><a data-ajax="false" href="index-ecommerce.html">E-Commerce</a></li>
            		    <li data-icon='false'><i class="fa fa-user"></i><a data-ajax="false" href="index-personal.html">Personalni</a></li>
            		    <li data-icon='false'><i class="fa fa-align-right"></i><a data-ajax="false" href="index-alt-right.html">Right sidebar</a></li>
            		</ul>
            			
            		<h4>Navigation</h4>
            			
            		<ul data-role="listview">
            		    
            		    <li data-icon='false'><i class="fa fa-pencil-square-o"></i><a data-ajax="false" href="blog.html">Blog</a></li>
            		    
            		    <li data-icon='false' class="menu-item-has-children"><i class="fa fa-html5"></i><a href="#">HTML Examples (9)</a>
            		        <ul data-role="listview" class="sub-menu">
            		        	<li data-icon='false'><i class="fa fa-list"></i><a href="text.html" data-ajax="false">Text</a></li>
            		        	<li data-icon='false'><i class="fa fa-filter"></i><a href="forms.html" data-ajax="false">Forms</a></li>
            		        	<li data-icon='false'><i class="fa fa-align-left"></i><a href="panels.html" data-ajax="false">Sidebars</a></li>
            		        	<li data-icon='false'><i class="fa fa-table"></i><a href="tables.html" data-ajax="false">Tables</a></li>
            		        	<li data-icon='false'><i class="fa fa-th-large"></i><a href="boxes.html" data-ajax="false">Boxes</a></li>
            		        	<li data-icon='false'><i class="fa fa-arrow-left"></i><a href="back.html" data-ajax="false">Back button</a></li>
            		        	<li data-icon='false'><i class="fa fa-list-alt"></i><a href="listview.html" data-ajax="false">Listview</a></li>
            		        	<li data-icon='false'><i class="fa fa-external-link"></i><a href="dialogs.html" data-ajax="false">Dialogs</a></li>
            		        	<li data-icon='false'><i class="fa fa-arrows-h"></i><a href="footer.html" data-ajax="false">Footer</a></li>
            		        </ul>
            		    </li>
            		    
            		    <li data-icon='false' class="menu-item-has-children"><i class="fa fa-code"></i><a href="#">Cool Extensions (4)</a>
            		        <ul data-role="listview" class="sub-menu">
            		        	<li data-icon='false'><i class="fa fa-road"></i><a href="location.html" data-ajax="false">GPS Tracking</a></li>
            		        	<li data-icon='false'><i class="fa fa-toggle-right"></i><a href="slider.html" data-ajax="false">Owl Slider</a></li>
            		        	<li data-icon='false'><i class="fa fa-sort-amount-asc"></i><a href="iscroll.html" data-ajax="false">iScroll 5</a></li>
            		        	<li data-icon='false'><i class="fa fa-tablet"></i><a href="devices.html" data-ajax="false">Device Detection</a></li>
            		        </ul>
            		    </li>
            		    
            		    <li data-icon='false' class="menu-item-has-children"><i class="fa fa-coffee"></i><a href="#">Developers Extra (3)<span class="menu-mark">1</span></a>
            		        <ul data-role="listview" class="sub-menu">
            		        	<li data-icon='false'><i class="fa fa-paper-plane-o"></i><a data-ajax="false" href="getting-started.html">Getting started</a></li>
            		        	<li data-icon='false'><i class="fa fa-stack-overflow"></i><a data-ajax="false" href="version.html">Changelog<span class="menu-mark">1</span></a></li>
            		        	<li data-icon='false'><i class="fa fa-genderless"></i><a data-ajax="false" href="_.html">Plain Page</a></li>
            		        </ul>
            		    </li>
            		    
            		    <li data-icon='false'><i class="fa fa-envelope-o"></i><a data-ajax="false" href="contact.php">Contact form</a></li>
            		    
            		</ul>
            </div>
            
            <form id="searchform">
                <input data-role="none" class="luke-input" type="text" name="s" placeholder="Enter your text" />
                <input data-role="none" class="luke-button" type="submit" name="submit" value="" />
            </form>
    
            <div data-role="header" data-tap-toggle="false" data-theme='b'>
                <a href='#sidebar' data-role="none" id="a-sidebar"><img src="images/menu-icon.png" alt="sidebar" id="header-menu-icon" /></a>
                <h1 class="header-title">Location Tracking</h1>
                <a href='#' data-role="none" id="a-search"><img src="images/search-icon.png" alt="search" id="header-search-icon" /></a>
            </div>
            
            <div data-role="content">
                
                <p class="prologue">Daisy comes with great feature that will make your web applications stand out! The feature is <strong>
                location tracking</strong> via browser for computers or <strong>GPS location tracking</strong> for mobiles.</p>
                <h3>How does it work?</h3>
                <p>Browser's location (it will probably ask you to accept or deny the request) provides information about the <strong>latitude</strong> and <strong>longitude</strong>. Then the AJAX call to Google API retrieves the address for our geolocation.</p>
                <h3>What can it do?</h3>
                <p>Retrieves user's exact location (latitude/longtitude) or pharse user's address, city, state, district and more.</p>
                
                <div class="luke-bg" data-theme="c" data-inner="true">
                <h2 data-inner="false" class="">Working example</h2>
                
                <p><button id="show-address" data-role="none" class="luke-button">Read address</button></p>
   
                <table class="ui-responsive align-left">
                    <tr height="25">
                        <td width="250">Address</td><td id="address"></td>
                    </tr>
                    <tr height="25">
                        <td>City</td><td id="city"></td>
                    </tr>
                    <tr height="25">
                        <td>State</td><td id="state"></td>
                    </tr>
                    <tr height="25">
                        <td>GPS Latitude</td><td id="lat"></td>
                    </tr>
                    <tr height="25">
                        <td>GPS Longtitude</td><td id="lng"></td>
                    </tr>
              
                </table>
                </div>
                <p><em>Address reading is for demonstration purposes only. Your address will not be stored in any way.</em></p>
                
                <h3>Show me the code!</h3>
                <p>Usage is very simple and easy to understand. Use geolocation code provided with Daisy (located in location.html) alongside with this simple jQuery code:</p>
                
                <pre>var geocoder;

function readLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(successFunction, errorFunction);
    } 
}

function successFunction(position) {
    var lat = position.coords.latitude;
    var lng = position.coords.longitude;
    codeLatLng(lat, lng)
}
            
function errorFunction(){ alert("Geocoder failed"); }
            
function codeLatLng(lat, lng) {  
    var latlng = new google.maps.LatLng(lat, lng);
    geocoder.geocode({'latLng': latlng}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            if (results[1]) {
                interpretation(results, lat, lng);
            } else {
                alert("No results found");
            }
        } else {
            alert("Geocoder failed due to: " + status);
        }
    });           
}    

function interpretation(results, lat, lng) {
    $("#address").append(results[0].address_components[2].short_name + " "
    + results[0].address_components[1].short_name + "/"
    + results[0].address_components[0].short_name);
    $("#city").append(results[0].address_components[3].short_name);
    $("#state").append(results[0].address_components[7].short_name);
    $("#lat").append(lat);
    $("#lng").append(lng);
}
                
$("#show-address").click(function(event){
    readLocation();
    geocoder = new google.maps.Geocoder();
});</pre>
                <p>That's it! What this code does?<br />1. Click the button.<br />2. Read user's geolocation via browser.<br />3. Interpret the results.</p>
                
                <h3>List of used variables</h3>
                <pre>
results[0].address_components[0].short_name - Address (house) number
results[0].address_components[1].short_name - Address (house) number
results[0].address_components[2].short_name - Address (street)
results[0].address_components[3].short_name - City
results[0].address_components[4].short_name - City (other)
results[0].address_components[5].short_name - Locality (big town)
results[0].address_components[6].short_name - Locality (district)
results[0].address_components[7].short_name - State
results[0].address_components[8].short_name - Postal code
lat - Latitude
lng - Longtitude</pre>
                <p>There are even more variables available. Read Google Geolocation API for futher informations.</p>
                
                <h3>Note at the end</h3>
                <p>This function is purely experimental and cannot give you the exact location. However the geolocation can be very precise. From my experience the results may vary depending on the browser. Google Chrome for example is very lame at this. In Safari is the result extraordinary accurate.</p>
                
            </div>
            
            <div data-role="footer" data-theme="none" data-border="false" data-inner="true">
                <p>Copyright 2015. All rights reserved.</p>
            </div>
            
        </div>
        
        <script type="text/javascript">

            var geocoder;
            
            // Read location from browser
            function readLocation() {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(successFunction, errorFunction);
                } 
            }
            
            // Get the latitude and the longtitude
            function successFunction(position) {
                var lat = position.coords.latitude;
                var lng = position.coords.longitude;
                codeLatLng(lat, lng)
            }
            
            function errorFunction(){ alert("Geocoder failed"); }
            
            function codeLatLng(lat, lng) {
            
                var latlng = new google.maps.LatLng(lat, lng);
                geocoder.geocode({'latLng': latlng}, function(results, status) {
                  if (status == google.maps.GeocoderStatus.OK) {

                    if (results[1]) {
                      interpretation(results, lat, lng);
                    } else {
                      alert("No results found");
                    }
                  } else {
                    alert("Geocoder failed due to: " + status);
                  }
                });
                
              }    
              
              // What this function does is basicaly just input pharsed data in HTML table. This function can be changed.
              function interpretation(results, lat, lng) {
                  $("#address").append("<strong>"+results[0].address_components[2].short_name + " " + results[0].address_components[1].short_name + "/" + results[0].address_components[0].short_name+"</strong>");
                  $("#city").append("<strong>"+results[0].address_components[3].short_name+"</strong>");
                  $("#state").append("<strong>"+results[0].address_components[7].short_name+"</strong>");
                  $("#lat").append("<strong>"+lat+"</strong>");
                  $("#lng").append("<strong>"+lng+"</strong>");
                  
                  // If you want to do something with your data do it inside this function.
              }
              
              $("#show-address").click(function(event){

                  readLocation(); // read location only after clicking the button, not immediately after loading page (might be annoying)
                  geocoder = new google.maps.Geocoder();

              });
              
              
               
        </script>

    </body>
</html>